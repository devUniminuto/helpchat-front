{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport message from \"@/components/message.vue\";\nimport MiddleBox from \"@/components/static/MiddleBox.vue\";\nimport QuarterBox from \"@/components/static/QuarterBox.vue\";\nimport * as io from \"socket.io-client\";\nexport default {\n  data: () => ({\n    nombreChatSeleccionado: \"\",\n    chatsActivos: [],\n    mensajesActualChat: [],\n    socket: null,\n    mensaje: \"\"\n  }),\n  methods: {\n    chatEntrante(data) {\n      console.log(\"Nuevo chat!\");\n      console.log(data);\n      this.chatsActivos.push(data);\n    },\n    openChat(idChat) {\n      this.nombreChatSeleccionado = idChat;\n      this.socket.emit(\"server:support_access\", {\n        idChat: sendLastMessage.idChat\n      });\n    },\n    enviarMensaje() {\n      this.mensajesActualChat.push({\n        from: \"Tú\",\n        message: this.mensaje,\n        receive: false\n      });\n      this.socket.emit(\"server:sendMessageSupport\", {\n        msg: this.mensaje\n      });\n    },\n    nuevoMensaje(data) {\n      let nuevoMensaje = data;\n      nuevoMensaje.receive = true;\n      this.mensajesActualChat.push(data);\n    },\n    makeConnectionWS() {\n      this.socket = io.connect(\"ws://localhost:9000/\", {\n        cors: {\n          credentials: true\n        }\n      });\n      this.socket.emit(\"server:connectTest\", {\n        text: \"HOla!\"\n      });\n      this.socket.on(\"client:newChatLive\", this.chatEntrante);\n      this.socket.on(\"client:newMessageSupport\", this.nuevoMensaje);\n    }\n  },\n  mounted() {\n    this.makeConnectionWS();\n  },\n  components: {\n    message,\n    MiddleBox,\n    QuarterBox\n  }\n};","map":{"version":3,"mappings":";AAgEA;AACA;AACA;AACA;AAEA;EACAA;IACAC;IACAC;IACAC;IACAC;IACAC;EACA;EAEAC;IACAC;MACAC;MACAA;MACA;IACA;IAEAC;MACA;MACA;QACAC;MACA;IACA;IAEAC;MACA;QACAC;QACAC;QACAC;MACA;MACA;QACAC;MACA;IACA;IAEAC;MACA;MACAA;MACA;IACA;IAEAC;MACA;QACAC;UACAC;QACA;MACA;MACA;QAAAC;MAAA;MACA;MACA;IACA;EACA;EAEAC;IACA;EACA;EAEAC;IACAT;IACAU;IACAC;EACA;AACA","names":["data","nombreChatSeleccionado","chatsActivos","mensajesActualChat","socket","mensaje","methods","chatEntrante","console","openChat","idChat","enviarMensaje","from","message","receive","msg","nuevoMensaje","makeConnectionWS","cors","credentials","text","mounted","components","MiddleBox","QuarterBox"],"sourceRoot":"src/views","sources":["ChatEnVivoView.vue"],"sourcesContent":["<template>\n  <div>\n    <QuarterBox class=\"shadowHover\">\n      <h2>Chats Activos</h2>\n      <div\n        v-for=\"(chat, index) in chatsActivos\"\n        :key=\"index\"\n        @click=\"openChat(chat.idConversacion)\"\n      >\n        <message\n          de=\"\"\n          :msg=\"'Nuevo chat ' + chat.idConversacion\"\n          :receive=\"true\"\n        ></message>\n      </div>\n    </QuarterBox>\n    <MiddleBox class=\"shadowHover\">\n      <div\n        id=\"messages-container\"\n        style=\"overflow-y: scroll; height: 500px; padding: 10px\"\n      >\n        <h2>Chat con {{ nombreChatSeleccionado }}</h2>\n\n        <div\n          v-for=\"(chat, index) in chatsActivos\"\n          :key=\"index\"\n        >\n          <message\n            :de=\"chat.from\"\n            :msg=\"chat.message\"\n            :receive=\"chat.receive\"\n          ></message>\n        </div>\n\n        <div style=\"display: flex; justify-content: space-between\">\n          <input\n            type=\"text\"\n            v-model=\"mensaje\"\n            placeholder=\"Escribe un mensaje...\"\n            style=\"width: 100%;\n              padding: 8px;\n              border: 1px solid rgb(204, 204, 204);\n              border-radius: 5px;\n            \"\n          /><button\n            @click=\"enviarMensaje()\"\n            style=\"background-color: rgb(76, 175, 80);\n              color: rgb(255, 255, 255);\n              border: none;\n              border-radius: 5px;\n              padding: 8px;\n              margin-left: 10px;\n              cursor: pointer;\n            \"\n          >\n            Enviar\n          </button>\n        </div>\n      </div>\n    </MiddleBox>\n  </div>\n</template>\n\n<script>\nimport message from \"@/components/message.vue\";\nimport MiddleBox from \"@/components/static/MiddleBox.vue\";\nimport QuarterBox from \"@/components/static/QuarterBox.vue\";\nimport * as io from \"socket.io-client\";\n\nexport default {\n  data: () => ({\n    nombreChatSeleccionado: \"\",\n    chatsActivos: [],\n    mensajesActualChat: [],\n    socket: null,\n    mensaje: \"\"\n  }),\n\n  methods: {\n    chatEntrante(data) {\n      console.log(\"Nuevo chat!\");\n      console.log(data);\n      this.chatsActivos.push(data);\n    },\n\n    openChat(idChat) {\n      this.nombreChatSeleccionado = idChat;\n      this.socket.emit(\"server:support_access\", {\n        idChat: sendLastMessage.idChat\n      });\n    },\n\n    enviarMensaje(){\n      this.mensajesActualChat.push({\n        from: \"Tú\",\n        message: this.mensaje,\n        receive: false\n      });\n      this.socket.emit(\"server:sendMessageSupport\", {\n        msg: this.mensaje\n      });\n    },\n\n    nuevoMensaje(data) {\n      let nuevoMensaje = data\n      nuevoMensaje.receive = true\n      this.mensajesActualChat.push(data);\n    },\n\n    makeConnectionWS() {\n      this.socket = io.connect(\"ws://localhost:9000/\", {\n        cors: {\n          credentials: true,\n        },\n      });\n      this.socket.emit(\"server:connectTest\", { text: \"HOla!\" });\n      this.socket.on(\"client:newChatLive\", this.chatEntrante);\n      this.socket.on(\"client:newMessageSupport\", this.nuevoMensaje);\n    },\n  },\n\n  mounted() {\n    this.makeConnectionWS();\n  },\n\n  components: {\n    message,\n    MiddleBox,\n    QuarterBox,\n  },\n};\n</script>\n\n<style scoped>\ndiv {\n  width: 100%;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}